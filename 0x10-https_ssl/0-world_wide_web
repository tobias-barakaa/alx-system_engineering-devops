#!/usr/bin/env bash
# Function to display subdomain information
display_info() {
  local domain="$1"
  local subdomain="$2"
  local record_type="$3"
  local destination="$4"
  echo "The subdomain $subdomain is a $record_type record and points to $destination"
}

# Check if domain and subdomain parameters are provided
if [ "$#" -eq 2 ]; then
  domain="$1"
  subdomain="$2"
else
  echo "Usage: $0 <domain> [subdomain]"
  exit 1
fi

# Define subdomains
subdomains=("www" "lb-01" "web-01" "web-02")

# Loop through subdomains and fetch DNS information
for sub in "${subdomains[@]}"; do
  if [ -z "$subdomain" ] || [ "$subdomain" == "$sub" ]; then
    result=$(dig "$sub.$domain" | awk '/ANSWER SECTION/ {getline; print}')
    if [ -n "$result" ]; then
      record_type=$(echo "$result" | awk '{print $2}')
      destination=$(echo "$result" | awk '{print $5}')
      display_info "$domain" "$sub" "$record_type" "$destination"
    fi
  fi
done
